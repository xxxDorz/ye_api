{"version":3,"file":"inspx.cjs.production.min.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/index.tsx"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import * as React from 'react';\nimport * as CSS from 'csstype';\nimport { getPlacementData, SIDE_OPTIONS } from '@radix-ui/popper';\nimport './styles.css';\n\n////////////////////////////////////////////////////////////////////////////////\n// <Inspect />\n\nexport interface InspectProps {\n  children: React.ReactElement | React.ReactElement[];\n  margin?: boolean;\n  padding?: boolean;\n  size?: boolean;\n  disabled?: boolean;\n}\n\nlet isCloke = false;\n\nexport default function Inspect({\n  children,\n  margin = true,\n  padding = true,\n  size = true,\n  disabled = process.env.NODE_ENV !== 'development',\n}: InspectProps) {\n  const nodesAtPointerRef = React.useRef<HTMLElement[]>([]);\n\n  React.useEffect(() => {\n    function onKeyDown(e: KeyboardEvent) {\n      if (e.key === 'Alt') {\n        if (margin) inspectMargin(nodesAtPointerRef.current);\n        if (size) inspectSize(nodesAtPointerRef.current);\n        if (padding) inspectPadding(nodesAtPointerRef.current);\n      }\n    }\n\n    function onKeyUp(e: KeyboardEvent) {\n      if (e.key === 'Alt') {\n        uninspect();\n      }\n    }\n\n    function onInspxSwitch() {\n      if (isCloke) {\n        uninspect();\n      } else {\n        if (margin) inspectMargin(nodesAtPointerRef.current);\n        if (size) inspectSize(nodesAtPointerRef.current);\n        if (padding) inspectPadding(nodesAtPointerRef.current);\n      }\n      isCloke = !isCloke;\n    }\n\n    if (!disabled) {\n      window.addEventListener('keyup', onKeyUp);\n      window.addEventListener('keydown', onKeyDown);\n      // @ts-ignore\n      window.addEventListener('inspxswitch', onInspxSwitch);\n    }\n\n    return () => {\n      window.removeEventListener('keyup', onKeyUp);\n      window.removeEventListener('keydown', onKeyDown);\n      // @ts-ignore\n      window.removeEventListener('inspxswitch', onInspxSwitch);\n    };\n  }, [margin, size, padding, disabled]);\n\n  if (disabled) {\n    return <React.Fragment>{children}</React.Fragment>;\n  }\n\n  return (\n    <span\n      onMouseOver={e => {\n        e.stopPropagation();\n\n        uninspect();\n\n        const nodes = document.elementsFromPoint(e.clientX, e.clientY) as HTMLElement[];\n\n        nodesAtPointerRef.current = nodes as HTMLElement[];\n\n        if (e.altKey || isCloke) {\n          if (margin) inspectMargin(nodes);\n          if (size) inspectSize(nodes);\n          if (padding) inspectPadding(nodes);\n        }\n      }}\n    >\n      {children}\n    </span>\n  );\n}\n\n////////////////////////////////////////////////////////////////////////////////\n// Imperative code is amazing.\n\nfunction createMarkerNode(text: string, type: string, popperOptions: any) {\n  const marker = document.createElement('inspx');\n  marker.innerText = text;\n  marker.setAttribute('type', type);\n\n  document.body.appendChild(marker);\n\n  const { width: popperWidth, height: popperHeight } = marker.getBoundingClientRect();\n\n  const { popperStyles } = getPlacementData({\n    popperSize: { width: popperWidth, height: popperHeight },\n    sideOffset: 8,\n    align: 'center',\n    side: 'bottom',\n    alignOffset: 0,\n    collisionBoundariesRect: DOMRect.fromRect({\n      width: window.innerWidth,\n      height: window.innerHeight,\n      x: 0,\n      y: 0,\n    }),\n    collisionTolerance: 0,\n    shouldAvoidCollisions: true,\n    ...popperOptions,\n  });\n\n  Object.entries(popperStyles).forEach(([key, value]) => {\n    marker.style.setProperty(key, value);\n  });\n}\n\nfunction createMargin(index: number, value: number, node: HTMLElement, side: 'top' | 'right' | 'bottom' | 'left') {\n  const margin = document.createElement('margin');\n\n  const { width: nodeWidth, height: nodeHeight } = node.getBoundingClientRect();\n\n  const widths = [nodeWidth, value, nodeWidth, value];\n  const heights = [value, nodeHeight, value, nodeHeight];\n\n  const width = widths[index];\n  const height = heights[index];\n\n  style(margin, {\n    width,\n    height,\n  });\n\n  const { popperStyles } = getPlacementData({\n    popperSize: { width, height },\n    sideOffset: 0,\n    align: 'start',\n    side: side,\n    alignOffset: 0,\n    collisionBoundariesRect: DOMRect.fromRect({\n      width: window.innerWidth,\n      height: window.innerHeight,\n      x: 0,\n      y: 0,\n    }),\n    anchorRect: node.getBoundingClientRect(),\n    collisionTolerance: 0,\n    shouldAvoidCollisions: false,\n  });\n\n  style(margin, popperStyles as any);\n  document.body.appendChild(margin);\n}\n\nfunction inspectMargin(nodes: HTMLElement[]) {\n  const marginNodes = nodes.filter(hasMargin);\n\n  const node = marginNodes[0];\n\n  if (!node) {\n    return;\n  }\n\n  node.setAttribute('data-inspx-active', '');\n\n  const { marginTop, marginRight, marginBottom, marginLeft } = window.getComputedStyle(node);\n\n  const margins = [marginTop, marginRight, marginBottom, marginLeft].map(m => parseInt(m, 10));\n\n  margins.forEach((margin, index) => {\n    if (!margin) {\n      return;\n    }\n\n    createMarkerNode(String(margin), 'margin', {\n      anchorRect: node.getBoundingClientRect(),\n      side: SIDE_OPTIONS[index],\n      shouldAvoidCollisions: false,\n      sideOffset: margin / 2 - 10,\n    });\n\n    createMargin(index, margin, node, SIDE_OPTIONS[index]);\n  });\n}\n\nfunction inspectSize(nodes: HTMLElement[]) {\n  const sizeNodes = nodes.filter(hasSize);\n\n  const node = sizeNodes[0];\n\n  if (!node) {\n    return;\n  }\n\n  node.setAttribute('data-inspx-active', '');\n\n  const { width, height, top, left, right, bottom } = node.getBoundingClientRect();\n\n  const marker = document.createElement('inspx');\n  marker.innerText = `${Math.round(width)} x ${Math.round(height)}`;\n  marker.setAttribute('type', 'size');\n\n  document.body.appendChild(marker);\n\n  const { width: markerWidth, height: markerHeight } = marker.getBoundingClientRect();\n\n  const x = (left + right) / 2 - markerWidth / 2;\n  const y = (top + bottom) / 2 - markerHeight / 2;\n\n  style(marker, getPlacementStylesForPoint({ x, y }));\n}\n\nfunction createPadding(node: HTMLElement, paddings: number[]) {\n  const padding = document.createElement('padding');\n\n  const { width, height, x, y } = node.getBoundingClientRect();\n\n  style(padding, {\n    ...getPlacementStylesForPoint({ x, y }),\n    width: width,\n    height: height,\n    'border-top-width': paddings[0],\n    'border-right-width': paddings[1],\n    'border-bottom-width': paddings[2],\n    'border-left-width': paddings[3],\n  });\n\n  document.body.appendChild(padding);\n}\n\nfunction inspectPadding(nodes: HTMLElement[]) {\n  const marginNodes = nodes.filter(hasPadding);\n\n  const node = marginNodes[0];\n\n  if (!node) {\n    return;\n  }\n\n  node.setAttribute('data-inspx-active', '');\n\n  const { paddingTop, paddingRight, paddingBottom, paddingLeft } = window.getComputedStyle(node);\n\n  const paddings = [paddingTop, paddingRight, paddingBottom, paddingLeft].map(m => parseInt(m, 10));\n\n  paddings.forEach((padding, index) => {\n    if (!padding) {\n      return;\n    }\n\n    createMarkerNode(String(padding), 'padding', {\n      anchorRect: node.getBoundingClientRect(),\n      side: SIDE_OPTIONS[index],\n      shouldAvoidCollisions: false,\n      sideOffset: -padding / 2 - 10,\n    });\n  });\n\n  createPadding(node, paddings);\n}\n\n////////////////////////////////////////////////////////////////////////////////\n// Helpers.\n\nfunction uninspect() {\n  Array.from(document.querySelectorAll('[data-inspx-active]')).forEach(node => {\n    node.removeAttribute('data-inspx-active');\n  });\n  Array.from(document.querySelectorAll('inspx')).forEach(marker => {\n    document.body.removeChild(marker);\n  });\n  Array.from(document.querySelectorAll('margin')).forEach(marker => {\n    document.body.removeChild(marker);\n  });\n  Array.from(document.querySelectorAll('padding')).forEach(marker => {\n    document.body.removeChild(marker);\n  });\n}\n\nfunction isDefined(margin: string) {\n  return !!parseInt(margin, 10);\n}\n\nfunction hasMargin(node: HTMLElement) {\n  const styles = window.getComputedStyle(node);\n\n  return (\n    isDefined(styles.marginTop) ||\n    isDefined(styles.marginRight) ||\n    isDefined(styles.marginBottom) ||\n    isDefined(styles.marginLeft) ||\n    isDefined(styles.margin)\n  );\n}\n\nfunction hasPadding(node: HTMLElement) {\n  const styles = window.getComputedStyle(node);\n\n  return (\n    isDefined(styles.paddingTop) ||\n    isDefined(styles.paddingRight) ||\n    isDefined(styles.paddingBottom) ||\n    isDefined(styles.paddingLeft) ||\n    isDefined(styles.padding)\n  );\n}\n\nfunction hasSize(node: HTMLElement) {\n  const styles = window.getComputedStyle(node);\n  return isDefined(styles.width) && isDefined(styles.height);\n}\n\nfunction style(node: HTMLElement, styles: Object) {\n  Object.entries(styles).forEach(([key, value]) => {\n    node.style.setProperty(key, typeof value === 'number' ? value + 'px' : value);\n  });\n}\n\nfunction getPlacementStylesForPoint(point: { x: number; y: number }): CSS.Properties {\n  const x = Math.round(point.x + window.scrollX);\n  const y = Math.round(point.y + window.scrollY);\n  return {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    minWidth: 'max-content',\n    willChange: 'transform',\n    transform: `translate3d(${x}px, ${y}px, 0)`,\n  };\n}\n"],"names":["css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","isCloke","createMarkerNode","text","popperOptions","marker","innerText","setAttribute","body","getBoundingClientRect","getPlacementData","popperSize","width","height","sideOffset","align","side","alignOffset","collisionBoundariesRect","DOMRect","fromRect","window","innerWidth","innerHeight","x","y","collisionTolerance","shouldAvoidCollisions","Object","entries","popperStyles","forEach","setProperty","inspectMargin","nodes","node","filter","hasMargin","getComputedStyle","marginTop","marginRight","marginBottom","marginLeft","map","m","parseInt","margin","index","String","anchorRect","SIDE_OPTIONS","value","nodeWidth","nodeHeight","createMargin","inspectSize","hasSize","top","left","right","bottom","Math","round","getPlacementStylesForPoint","inspectPadding","hasPadding","paddings","paddingTop","paddingRight","paddingBottom","paddingLeft","padding","createPadding","uninspect","Array","from","querySelectorAll","removeAttribute","removeChild","isDefined","styles","point","position","minWidth","willChange","transform","scrollX","scrollY","children","size","disabled","nodesAtPointerRef","React","onKeyDown","e","key","current","onKeyUp","onInspxSwitch","addEventListener","removeEventListener","onMouseOver","stopPropagation","elementsFromPoint","clientX","clientY","altKey"],"mappings":"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"}